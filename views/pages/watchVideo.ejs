<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head %>
    <link rel=stylesheet href="../../static/css/style.css"></link>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>

</head>
<body class="container">

<header>
    <% include ../partials/header %>
</header>

<main>
    <div class="jumbotron">
        <h3>Welcome <%= currentUser %></h3>
        <p>lesson page</p>
    </div>

  <div id="contentWrapper" class="content-wrapper">
    <div class="video-wrapper">
      <div id="video-placeholder">

      </div>
    </div>

    <div id="scriptWrapper" class="script-wrapper">
      <div id="scriptPlaceholder" class="script-place-holder">
      </div>
    </div>
    <div id="noteWrapper" class="note-wrapper">
      <div id="notePlaceholder" class="note-place-holder">
        <form autocomplete="off" accept-charset="UTF-8" onsubmit=""  action="/profile/watchVideo/note" method="post" id="noteForm" class="note-form">

          <div id='noteContent'></div>
          <div id='noteControls'>
            <button id="newWordButton" class="new-word-button">new word</button>
            <button id="newExpressionButton" class="new-expression-button">new expression</button>
            <input id="submitButton" type="submit" onclick="myFunction()" class="submit" value="Submit" />
            <input type="hidden" id="vidIdfromQuery" value= <%=vidId%> name = "vidId"/>
          </div>
  </form>
  <br/>

      </div>
    </div>
  </div id="contentWrapper">
</main>

<footer>
    <% include ../partials/footer %>
</footer>
<script src="../../static/js/jquery-3.1.1.js"></script>
<script src="../../static/js/notepad_functions.js"></script>
<script>
  var player;
  function onYouTubeIframeAPIReady() {
      player = new YT.Player('video-placeholder', {
          width: 800,
          height: 500,
          videoId: '<%= vidId %>',
          playerVars: {
              autoplay: 1,
              color: 'white',
              controls:0,
              rel:0,
              iv_load_policy: 3,


          },
          events: {
              onReady: console.log('youtube video is loaded'),
              // onStateChange:
          }
      });
  }

//bring in script's json file into the ejs
  var loadedScript = <%- JSON.stringify(script) %>
  var scriptFile = [loadedScript[0].script] //fix this[0]
  var scriptFileArray = [...scriptFile[0]]

   for(i=0; i<scriptFileArray.length; i++){
     $("#scriptPlaceholder").append("<div id=scriptSent"+i+" class=script-sent time="+scriptFileArray[i].startTime+"> </div> <br />")
     $("#scriptSent"+i).text(scriptFileArray[i].content)
    }

//function to skip to line's time
  $(".script-sent").on("click",function(){
    player.seekTo($(this).attr('time'))
$("#submitButton").on("click", function(){
  console.log(wordLearn)
  console.log(wordCommentLearn)
})


  })
</script>


</body>
</html>
